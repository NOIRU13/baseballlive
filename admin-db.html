<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DB管理 - Baseball Live</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* admin-db.html specific styles */
      body.admin-db-mode {
        background: #1a1a2e;
        color: #fff;
        font-family: 'Noto Sans JP', sans-serif;
        padding: 20px;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 10px;
      }

      h1 {
        font-size: 24px;
        color: #ffd700;
        margin: 0;
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .tab-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        padding: 10px 20px;
        color: #fff;
        cursor: pointer;
        border-radius: 5px;
        font-weight: bold;
      }

      .tab-btn.active {
        background: #ffd700;
        color: #000;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .section {
        background: rgba(255, 255, 255, 0.05);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-size: 14px;
        color: #ccc;
      }

      input, select {
        width: 100%;
        padding: 8px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #fff;
        border-radius: 4px;
        box-sizing: border-box;
      }

      button.primary-btn {
        background: #27ae60;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }

      button.primary-btn:hover {
        background: #2ecc71;
      }

      button.danger-btn {
        background: #c0392b;
        color: #fff;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      }
      
      button.edit-btn {
        background: #f39c12;
        color: #fff;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        margin-right: 4px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th, td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      th {
        color: #ffd700;
        font-size: 14px;
      }
      
      .flex-row {
          display: flex;
          gap: 10px;
      }
      
      .flex-1 { flex: 1; }
    </style>
  </head>
  <body class="admin-db-mode">
    <div class="container">
      <header>
        <h1>⚾ データベース管理</h1>
        <a href="index.html" style="color: #fff; text-decoration: none;">ホームへ戻る</a>
      </header>

      <div class="tabs">
        <button class="tab-btn active" onclick="showTab('teams')">チーム管理</button>
        <button class="tab-btn" onclick="showTab('players')">選手管理</button>
      </div>

      <!-- チーム管理タブ -->
      <div id="teams-tab" class="tab-content active">
        <div class="section">
          <h2>チーム登録</h2>
          <form id="team-form">
            <input type="hidden" id="team-id">
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="team-name">チーム名</label>
                  <input type="text" id="team-name" required placeholder="例: Hanshin Tigers">
                </div>
                <div class="form-group flex-1">
                  <label for="team-short-name">略称</label>
                  <input type="text" id="team-short-name" required placeholder="例: 阪神">
                </div>
            </div>
            <button type="submit" class="primary-btn">保存</button>
            <button type="button" onclick="resetTeamForm()" style="background:transparent; border:1px solid #aaa; color:#aaa; padding:8px; border-radius:4px; margin-left:10px; cursor:pointer;">キャンセル</button>
          </form>
        </div>

        <div class="section">
          <h2>登録済みチーム一覧</h2>
          <table id="teams-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>チーム名</th>
                <th>略称</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <!-- JSで挿入 -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- 選手管理タブ -->
      <div id="players-tab" class="tab-content">
        <div class="section">
          <h2>選手登録</h2>
          <form id="player-form">
            <input type="hidden" id="player-id">
            <div class="form-group">
                <label for="player-team-select">所属チーム</label>
                <select id="player-team-select" required>
                    <!-- JSで選択肢挿入 -->
                </select>
            </div>
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="player-name">選手名</label>
                  <input type="text" id="player-name" required placeholder="例: 佐藤 輝明">
                </div>
                <div class="form-group" style="width: 80px;">
                  <label for="player-number">背番号</label>
                  <input type="number" id="player-number" placeholder="8">
                </div>
            </div>
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="player-position">ポジション</label>
                  <select id="player-position">
                      <option value="P">P (投手)</option>
                      <option value="C">C (捕手)</option>
                      <option value="1B">1B (一塁手)</option>
                      <option value="2B">2B (二塁手)</option>
                      <option value="3B">3B (三塁手)</option>
                      <option value="SS">SS (遊撃手)</option>
                      <option value="LF">LF (左翼手)</option>
                      <option value="CF">CF (中堅手)</option>
                      <option value="RF">RF (右翼手)</option>
                      <option value="DH">DH (指名打者)</option>
                  </select>
                </div>
                <div class="form-group flex-1">
                  <label for="player-hand">投打</label>
                  <input type="text" id="player-hand" placeholder="例: 右投左打">
                </div>
            </div>
            <button type="submit" class="primary-btn">保存</button>
            <button type="button" onclick="resetPlayerForm()" style="background:transparent; border:1px solid #aaa; color:#aaa; padding:8px; border-radius:4px; margin-left:10px; cursor:pointer;">キャンセル</button>
          </form>
        </div>

        <div class="section">
          <h2>登録済み選手一覧</h2>
          <div class="form-group">
              <label>チームでフィルタ</label>
              <select id="filter-team-select" onchange="loadPlayers()">
                  <option value="">全チーム</option>
                  <!-- JSで選択肢挿入 -->
              </select>
          </div>
          <table id="players-table">
            <thead>
              <tr>
                <th>背番号</th>
                <th>選手名</th>
                <th>ポジション</th>
                <th>投打</th>
                <th>所属チーム</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <!-- JSで挿入 -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script src="js/admin-db.js"></script>
    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabName + '-tab').classList.add('active');
            // ボタンのアクティブ化ロジックは簡易的に（順番依存でなくクラス検索で）
            const btns = document.querySelectorAll('.tab-btn');
            if(tabName === 'teams') btns[0].classList.add('active');
            if(tabName === 'players') btns[1].classList.add('active');
        }
    </script>
  </body>
</html>
