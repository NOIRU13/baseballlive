<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DBç®¡ç† - Baseball Live</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* admin-db.html specific styles */
      body.admin-db-mode {
        background: #1a1a2e;
        color: #fff;
        font-family: 'Noto Sans JP', sans-serif;
        padding: 20px;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 10px;
      }

      h1 {
        font-size: 24px;
        color: #ffd700;
        margin: 0;
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .tab-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        padding: 10px 20px;
        color: #fff;
        cursor: pointer;
        border-radius: 5px;
        font-weight: bold;
      }

      .tab-btn.active {
        background: #ffd700;
        color: #000;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .section {
        background: rgba(255, 255, 255, 0.05);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-size: 14px;
        color: #ccc;
      }

      input, select {
        width: 100%;
        padding: 8px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #fff;
        border-radius: 4px;
        box-sizing: border-box;
      }

      button.primary-btn {
        background: #27ae60;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }

      button.primary-btn:hover {
        background: #2ecc71;
      }

      button.danger-btn {
        background: #c0392b;
        color: #fff;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      }
      
      button.edit-btn {
        background: #f39c12;
        color: #fff;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        margin-right: 4px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th, td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      th {
        color: #ffd700;
        font-size: 14px;
      }
      
      .flex-row {
          display: flex;
          gap: 10px;
      }
      
      .flex-1 { flex: 1; }
    </style>
  </head>
  <body class="admin-db-mode">
    <div class="container">
      <header>
        <h1>âš¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†</h1>
        <nav style="display: flex; gap: 10px;">
          <a href="index.html" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px;">ğŸ“º ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰</a>
          <a href="admin-control.html" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px;">âš™ï¸ è©¦åˆç®¡ç†</a>
          <a href="admin-lineup.html" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px;">ğŸ“‹ æ‰“é †ç®¡ç†</a>
          <a href="admin-simple.html" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px;">ğŸ® ç°¡æ˜“æ“ä½œ</a>
        </nav>
      </header>

      <div class="tabs">
        <button class="tab-btn active" onclick="showTab('teams')">ãƒãƒ¼ãƒ ç®¡ç†</button>
        <button class="tab-btn" onclick="showTab('players')">é¸æ‰‹ç®¡ç†</button>
        <button class="tab-btn" onclick="showTab('stats')">æˆç¸¾ç®¡ç†</button>
      </div>

      <!-- ãƒãƒ¼ãƒ ç®¡ç†ã‚¿ãƒ– -->
      <div id="teams-tab" class="tab-content active">
        <div class="section">
          <h2>ãƒãƒ¼ãƒ ç™»éŒ²</h2>
          <form id="team-form">
            <input type="hidden" id="team-id">
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="team-name">ãƒãƒ¼ãƒ å</label>
                  <input type="text" id="team-name" required placeholder="ä¾‹: Hanshin Tigers">
                </div>
                <div class="form-group flex-1">
                  <label for="team-short-name">ç•¥ç§°</label>
                  <input type="text" id="team-short-name" required placeholder="ä¾‹: é˜ªç¥">
                </div>
            </div>
            <button type="submit" class="primary-btn">ä¿å­˜</button>
            <button type="button" onclick="resetTeamForm()" style="background:transparent; border:1px solid #aaa; color:#aaa; padding:8px; border-radius:4px; margin-left:10px; cursor:pointer;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          </form>
        </div>

        <div class="section">
          <h2>ç™»éŒ²æ¸ˆã¿ãƒãƒ¼ãƒ ä¸€è¦§</h2>
          <table id="teams-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>ãƒãƒ¼ãƒ å</th>
                <th>ç•¥ç§°</th>
                <th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <!-- JSã§æŒ¿å…¥ -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- é¸æ‰‹ç®¡ç†ã‚¿ãƒ– -->
      <div id="players-tab" class="tab-content">
        <div class="section">
          <h2>é¸æ‰‹ç™»éŒ²</h2>
          <form id="player-form">
            <input type="hidden" id="player-id">
            <div class="form-group">
                <label for="player-team-select">æ‰€å±ãƒãƒ¼ãƒ </label>
                <select id="player-team-select" required>
                    <!-- JSã§é¸æŠè‚¢æŒ¿å…¥ -->
                </select>
            </div>
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="player-name">é¸æ‰‹å</label>
                  <input type="text" id="player-name" required placeholder="ä¾‹: ä½è—¤ è¼æ˜">
                </div>
                <div class="form-group" style="width: 80px;">
                  <label for="player-number">èƒŒç•ªå·</label>
                  <input type="number" id="player-number" placeholder="8">
                </div>
            </div>
            <div class="flex-row">
                <div class="form-group flex-1">
                  <label for="player-position">ãƒã‚¸ã‚·ãƒ§ãƒ³</label>
                  <select id="player-position">
                      <option value="P">P (æŠ•æ‰‹)</option>
                      <option value="C">C (æ•æ‰‹)</option>
                      <option value="IF">IF (å†…é‡æ‰‹)</option>
                      <option value="OF">OF (å¤–é‡æ‰‹)</option>
                  </select>
                </div>
                <div class="form-group flex-1">
                  <label for="player-hand">æŠ•æ‰“</label>
                  <input type="text" id="player-hand" placeholder="ä¾‹: å³æŠ•å·¦æ‰“">
                </div>
            </div>
            <button type="submit" class="primary-btn">ä¿å­˜</button>
            <button type="button" onclick="resetPlayerForm()" style="background:transparent; border:1px solid #aaa; color:#aaa; padding:8px; border-radius:4px; margin-left:10px; cursor:pointer;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          </form>
        </div>

        <div class="section">
          <h2>ç™»éŒ²æ¸ˆã¿é¸æ‰‹ä¸€è¦§</h2>
          <div class="form-group">
              <label>ãƒãƒ¼ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿</label>
              <select id="filter-team-select" onchange="loadPlayers()">
                  <option value="">å…¨ãƒãƒ¼ãƒ </option>
                  <!-- JSã§é¸æŠè‚¢æŒ¿å…¥ -->
              </select>
          </div>
          <table id="players-table">
            <thead>
              <tr>
                <th>èƒŒç•ªå·</th>
                <th>é¸æ‰‹å</th>
                <th>ãƒã‚¸ã‚·ãƒ§ãƒ³</th>
                <th>æŠ•æ‰“</th>
                <th>æ‰€å±ãƒãƒ¼ãƒ </th>
                <th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <!-- JSã§æŒ¿å…¥ -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- æˆç¸¾ç®¡ç†ã‚¿ãƒ– -->
      <div id="stats-tab" class="tab-content">
        <div class="section">
            <h2>CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ (Python Backend)</h2>
            <div class="form-group">
                <label>ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡</label>
                <select id="import-type">
                    <option value="batting">æ‰“æ’ƒæˆç¸¾</option>
                    <option value="pitching">æŠ•æ‰‹æˆç¸¾</option>
                    <option value="players">é¸æ‰‹æƒ…å ±</option>
                </select>
            </div>
            <div class="form-group">
                <label>CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</label>
                <input type="file" id="csv-file" accept=".csv">
            </div>
            <button onclick="uploadCsv()" class="primary-btn">ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ</button>
            <div id="upload-status" style="margin-top: 10px;"></div>
        </div>

        <div class="section">
            <h2>CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h2>
            <div class="flex-row">
                <button onclick="exportCsv('batting')" class="primary-btn" style="background: #3498db;">æ‰“æ’ƒæˆç¸¾ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                <button onclick="exportCsv('pitching')" class="primary-btn" style="background: #9b59b6;">æŠ•æ‰‹æˆç¸¾ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            </div>
        </div>

             <div class="section">
                 <h2>ãƒãƒ¼ãƒ åˆ¥æˆç¸¾ãƒªã‚»ãƒƒãƒˆ</h2>
                 <div class="form-group flex-row" style="align-items: center;">
                    <label style="margin-right: 10px;">å¯¾è±¡ãƒãƒ¼ãƒ :</label>
                    <select id="stats-team-filter" style="width: auto; min-width: 200px; margin-right: 10px;">
                        <option value="">ï¼ˆé¸æŠã—ã¦ãã ã•ã„ï¼‰</option>
                        <!-- JSã§æŒ¿å…¥ -->
                    </select>
                    <button id="btn-reset-team-stats" class="danger-btn" onclick="resetTeamStats()" disabled style="padding: 10px 20px; font-size: 14px;">ãƒãƒ¼ãƒ æˆç¸¾ä¸€æ‹¬å‰Šé™¤</button>
                 </div>
                 <p style="font-size: 12px; color: #aaa;">â€»é¸æŠã—ãŸãƒãƒ¼ãƒ ã®å…¨ã¦ã®æ‰“æ’ƒãƒ»æŠ•æ‰‹è¨˜éŒ²ï¼ˆç¾åœ¨é¸æŠä¸­ã®ã‚¿ãƒ–ã«é–¢ã‚ã‚‰ãšã€ä¸¡æ–¹å‰Šé™¤ã™ã‚‹ã‹ç¢ºèªã—ã¾ã™ï¼‰ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p>
             </div>

             <div class="section">
                 <h2>æˆç¸¾ãƒ‡ãƒ¼ã‚¿ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç™»éŒ²ãƒ»ç·¨é›†</h2>
                 <form id="stats-form">
                    <input type="hidden" id="stats-id">
                    <input type="hidden" id="stats-type" value="batting"> <!-- batting or pitching -->
                    
                    <div class="form-group">
                        <label for="stats-form-team-select">ãƒãƒ¼ãƒ </label>
                        <select id="stats-form-team-select" onchange="loadPlayersForStats(this.value)" required>
                            <option value="">ï¼ˆãƒãƒ¼ãƒ ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼‰</option>
                            <!-- JSã§æŒ¿å…¥ -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="stats-player-select">é¸æ‰‹</label>
                        <select id="stats-player-select" required>
                             <option value="">ï¼ˆãƒãƒ¼ãƒ ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼‰</option>
                             <!-- JSã§è©²å½“ãƒãƒ¼ãƒ ã®é¸æ‰‹ãƒ­ãƒ¼ãƒ‰ -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="stats-season">å¹´åº¦</label>
                        <input type="number" id="stats-season" value="2026" required>
                    </div>

                    <!-- æ‰“æ’ƒç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
                    <div id="batting-fields">
                        <div class="flex-row">
                            <div class="form-group flex-1">
                                <label for="stats-batting-average">æ‰“ç‡</label>
                                <input type="text" id="stats-batting-average" placeholder=".300">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-games-b">è©¦åˆæ•°</label>
                                <input type="number" id="stats-games-b">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-at-bats">æ‰“æ•°</label>
                                <input type="number" id="stats-at-bats">
                            </div>
                        </div>
                        <div class="flex-row">
                            <div class="form-group flex-1">
                                <label for="stats-hits">å®‰æ‰“</label>
                                <input type="number" id="stats-hits">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-home-runs">æœ¬å¡æ‰“</label>
                                <input type="number" id="stats-home-runs">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-rbis">æ‰“ç‚¹</label>
                                <input type="number" id="stats-rbis">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-ops">OPS</label>
                                <input type="text" id="stats-ops" placeholder=".850">
                            </div>
                        </div>
                    </div>

                    <!-- æŠ•æ‰‹ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
                    <div id="pitching-fields" style="display: none;">
                        <div class="flex-row">
                            <div class="form-group flex-1">
                                <label for="stats-era">é˜²å¾¡ç‡</label>
                                <input type="text" id="stats-era" placeholder="3.50">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-games-p">ç™»æ¿æ•°</label>
                                <input type="number" id="stats-games-p">
                            </div>
                        </div>
                        <div class="flex-row">
                            <div class="form-group flex-1">
                                <label for="stats-wins">å‹åˆ©</label>
                                <input type="number" id="stats-wins">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-losses">æ•—åŒ—</label>
                                <input type="number" id="stats-losses">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-saves">ã‚»ãƒ¼ãƒ–</label>
                                <input type="number" id="stats-saves">
                            </div>
                        </div>
                        <div class="flex-row">
                            <div class="form-group flex-1">
                                <label for="stats-innings">æŠ•çƒå›</label>
                                <input type="text" id="stats-innings">
                            </div>
                            <div class="form-group flex-1">
                                <label for="stats-strikeouts">å¥ªä¸‰æŒ¯</label>
                                <input type="number" id="stats-strikeouts">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="primary-btn">ä¿å­˜</button>
                    <button type="button" onclick="resetStatsForm()" style="background:transparent; border:1px solid #aaa; color:#aaa; padding:8px; border-radius:4px; margin-left:10px; cursor:pointer;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                 </form>
            </div>

             <div class="section">
                 <h2>æˆç¸¾ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
                 <div class="tabs" style="margin-bottom: 10px;">
                    <button class="tab-btn active" id="btn-stats-batting" onclick="switchStatsTab('batting')">æ‰“æ’ƒæˆç¸¾</button>
                    <button class="tab-btn" id="btn-stats-pitching" onclick="switchStatsTab('pitching')">æŠ•æ‰‹æˆç¸¾</button>
                </div>
                 <div style="overflow-x: auto;">
                    <table id="stats-table">
                        <thead>
                            <!-- JSã§ç”Ÿæˆ -->
                        </thead>
                        <tbody>
                            <!-- JSã§ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </div>
      </div>
    </div>

    <script src="js/admin-db.js"></script>
    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabName + '-tab').classList.add('active');
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ãƒ­ã‚¸ãƒƒã‚¯ã¯ç°¡æ˜“çš„ã«ï¼ˆã‚¯ãƒ©ã‚¹æ¤œç´¢ã§ï¼‰
            const btns = document.querySelectorAll('.tabs > .tab-btn');
            // è¦ªã® .tabs ç›´ä¸‹ã®ãƒœã‚¿ãƒ³ã®ã¿å¯¾è±¡ã«ã™ã‚‹ä¿®æ­£
            
            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®å¯¾å¿œä»˜ã‘ãŒå°‘ã—ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æ°—å‘³ã ãŒã€ã¨ã‚Šã‚ãˆãšã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§
            if(tabName === 'teams') btns[0].classList.add('active');
            if(tabName === 'players') btns[1].classList.add('active');
            if(tabName === 'stats') {
                btns[2].classList.add('active');
                switchStatsTab('batting'); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ‰“æ’ƒæˆç¸¾è¡¨ç¤º
            }
        }
    </script>
  </body>
</html>
