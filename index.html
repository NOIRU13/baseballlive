<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>野球スコアボード - Baseball Live</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500;700;900&family=Oswald:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="display-mode">
    <div id="broadcast-layout">
      <!-- ==================== 左サイドバー：Away Lineup ==================== -->
      <div class="sidebar left-sidebar">
        <div class="sidebar-header" id="sidebar-away-name"></div>
        <div class="lineup-list" id="lineup-away-display">
          <!-- JSで生成 -->
        </div>
      </div>

      <!-- ==================== 中央：映像エリア（透明） ==================== -->
      <div class="center-space">
        <!-- 16:9 映像エリア -->

        <!-- 中央フィールド表示：扇状球場 (Background Only) -->
        <div class="center-field-display">
          <div class="field-fan-shape"></div>
        </div>
        
        <!-- ==================== 中央情報エリア ==================== -->
        
        <!-- 得点ログエリア (中央上部) -->
        <div id="score-log-section" class="score-log-section">
            <div class="score-log-header">SCORING PLAYS</div>
            <div id="score-log-container" class="score-log-container">
                <div id="score-log-team-away" class="score-log-team-box"></div>
                <div id="score-log-team-home" class="score-log-team-box"></div>
            </div>
        </div>

        <!-- 両チーム投手リレー情報 (中央) -->
        <div class="pitcher-relay-section">
            <!-- アウェイチーム（左側） -->
            <div class="team-pitcher-panel away-pitcher-panel" id="away-pitcher-panel">
                <div class="pitcher-team-label" id="away-pitcher-team-label">AWAY</div>
                <div class="pitcher-list">
                    <div class="pitcher-entry starter" id="away-starter-entry">
                        <span class="pitcher-role">先発</span>
                        <span class="pitcher-name" id="away-starter-name">-</span>
                    </div>
                    <div class="relief-section" id="away-relief-section">
                        <div class="relief-header">リリーフ</div>
                        <div class="relief-list" id="away-relay-container">
                            <!-- リリーフ投手がJSで追加される -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ホームチーム（右側） -->
            <div class="team-pitcher-panel home-pitcher-panel" id="home-pitcher-panel">
                <div class="pitcher-team-label" id="home-pitcher-team-label">HOME</div>
                <div class="pitcher-list">
                    <div class="pitcher-entry starter" id="home-starter-entry">
                        <span class="pitcher-role">先発</span>
                        <span class="pitcher-name" id="home-starter-name">-</span>
                    </div>
                    <div class="relief-section" id="home-relief-section">
                        <div class="relief-header">リリーフ</div>
                        <div class="relief-list" id="home-relay-container">
                            <!-- リリーフ投手がJSで追加される -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

      </div>

      <!-- ==================== 右サイドバー：Home Lineup ==================== -->
      <div class="sidebar right-sidebar">
        <div class="sidebar-header" id="sidebar-home-name"></div>
        <div class="lineup-list" id="lineup-home-display">
          <!-- JSで生成 -->
        </div>
      </div>

      <!-- ==================== 上部：スコアボード ==================== -->
      <div class="top-scoreboard">
        <!-- Left Group: Inning, Count, Runner -->
        <div class="sb-left-group">
            <div class="inning-section">
                <div class="inning-box">
                    <span class="inning-num" id="inning-number">1</span>
                    <span class="inning-half" id="inning-half">表</span>
                </div>
            </div>

        </div>

        <!-- Center: Line Score Table -->
        <div class="line-score-container">
            <table class="line-score-table">
                <thead>
                    <tr>
                        <th>Team</th>
                        <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th>
                        <th>R</th><th>H</th><th>E</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="row-away">
                        <td class="team-name-cell" id="team-name-away"></td>
                        <td id="score-away-1">0</td><td id="score-away-2">0</td><td id="score-away-3">0</td>
                        <td id="score-away-4">0</td><td id="score-away-5">0</td><td id="score-away-6">0</td>
                        <td id="score-away-7">0</td><td id="score-away-8">0</td><td id="score-away-9">0</td>
                        <td id="score-away-total" class="total-cell">0</td>
                        <td id="stats-away-h">0</td>
                        <td id="stats-away-e">0</td>
                    </tr>
                    <tr id="row-home">
                        <td class="team-name-cell" id="team-name-home"></td>
                        <td id="score-home-1">0</td><td id="score-home-2">0</td><td id="score-home-3">0</td>
                        <td id="score-home-4">0</td><td id="score-home-5">0</td><td id="score-home-6">0</td>
                        <td id="score-home-7">0</td><td id="score-home-8">0</td><td id="score-home-9">0</td>
                        <td id="score-home-total" class="total-cell">0</td>
                        <td id="stats-home-h">0</td>
                        <td id="stats-home-e">0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Right: Info -->
        <div class="info-section" id="info-text">LIVE BROADCAST</div>
      </div>

      <!-- ==================== 左下：打者詳細情報 ==================== -->
      <div class="player-display-bottom left" id="player-display-left">
          <div class="player-role-label"></div>
          <div class="player-name-large" id="batter-name-large"></div>
          <div class="player-stats-row" id="batter-stats-season" style="border-bottom: 1px solid rgba(255,255,255,0.2); margin-bottom: 5px; padding-bottom: 5px; font-size: 0.9em;">
              <span class="stat-item"><span class="stat-label">AVG:</span> <span id="batter-avg"></span></span>
              <span class="stat-item"><span class="stat-label">HR:</span> <span id="batter-hr">0</span></span>
              <span class="stat-item"><span class="stat-label">RBI:</span> <span id="batter-rbi">0</span></span>
              <span class="stat-item"><span class="stat-label">OPS:</span> <span id="batter-ops"></span></span>
          </div>
          <div class="player-stats-row" id="batter-stats-today">
              <!-- 当日の打席結果を表示（例：遊ゴロ 左安 三振） -->
          </div>
      </div>

      <!-- ==================== 右下:投手詳細情報 ==================== -->
      <div class="player-display-bottom right" id="player-display-right">
          <div class="player-role-label"></div>
          <div class="player-name-large" id="pitcher-name-large"></div>
          <div class="player-stats-row" id="pitcher-stats-season" style="border-bottom: 1px solid rgba(255,255,255,0.2); margin-bottom: 5px; padding-bottom: 5px; font-size: 0.9em;">
              <span class="stat-item"><span class="stat-label">ERA:</span> <span id="pitcher-era"></span></span>
              <span class="stat-item"><span class="stat-label" title="Strikeouts per 9 innings">K/9:</span> <span id="pitcher-k9"></span></span>
          </div>
          <div class="player-stats-row" id="pitcher-stats-today">
              <!-- 投手の当日成績(イニング、三振、失点) -->
              <span class="stat-item"><span class="stat-label">IP:</span> <span id="pitcher-innings">0.0</span></span>
              <span class="stat-item"><span class="stat-label">K:</span> <span id="pitcher-strikeouts">0</span></span>
              <span class="stat-item"><span class="stat-label">BB:</span> <span id="pitcher-walks">0</span></span>
              <span class="stat-item"><span class="stat-label">R:</span> <span id="pitcher-runs">0</span></span>
          </div>
      </div>

      <!-- ==================== 中央下部：BSO & ランナー ==================== -->
      <div class="bso-runner-center">
          <div class="bso-display">
              <div class="count-row">
                  <span class="count-label b">B</span>
                  <div class="count-dots" id="ball-dots">
                      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                  </div>
              </div>
              <div class="count-row">
                  <span class="count-label s">S</span>
                  <div class="count-dots" id="strike-dots">
                      <span class="dot"></span><span class="dot"></span>
                  </div>
              </div>
              <div class="count-row">
                  <span class="count-label o">O</span>
                  <div class="count-dots" id="out-dots">
                      <span class="dot"></span><span class="dot"></span>
                  </div>
              </div>
          </div>

          <div class="runner-diamond">
              <div class="base-indicator first" id="runner-first"></div>
              <div class="base-indicator second" id="runner-second"></div>
              <div class="base-indicator third" id="runner-third"></div>
              <div class="home-plate-indicator"></div>
          </div>
      </div>


      <!-- ==================== 中央：結果アニメーションオーバーレイ ==================== -->
      <div id="result-overlay" class="result-overlay">
          <div class="result-text" id="result-text">HOMERUN</div>
      </div>
    </div>

    <!-- 自動スケーリング用スクリプト -->
    <script>
      function fitToWindow() {
        const el = document.getElementById('broadcast-layout');
        const targetWidth = 1920;
        const targetHeight = 1080;
        // 常に1920x1080比率でウィンドウにフィットさせる（黒帯が出る可能性あり）
        // または、width 100% height 100% でフィットさせる
        
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const scale = Math.min(windowWidth / targetWidth, windowHeight / targetHeight);
        
        el.style.transform = `translate(-50%, -50%) scale(${scale})`;
      }
      window.addEventListener('resize', fitToWindow);
      window.addEventListener('load', fitToWindow);
    </script>
    
    <!-- 簡易操作パネルと試合管理パネルを自動で開く -->
    <script>
      // ページ読み込み時に2つのウィンドウを開く
      window.addEventListener('load', function() {
        console.log('ページ読み込み完了 - ポップアップを開きます');
        
        try {
          // 1. 簡易操作パネルを開く（800x600、左側）
          const simpleWindow = window.open(
            'admin-simple.html',
            'simplePanel',
            'width=800,height=630,left=50,top=50,resizable=yes,scrollbars=yes'
          );
          
          if (simpleWindow) {
            console.log('簡易操作パネルを開きました');
          } else {
            console.error('簡易操作パネルがブロックされました');
          }
           // Other panels are now integrated into admin-simple.html
          
        } catch (error) {
          console.error('ポップアップを開く際にエラーが発生しました:', error);
          alert('操作パネルを開くには、ブラウザのポップアップブロックを解除してください。');
        }
      });
    </script>
    
    <script type="module" src="js/app.js"></script>
  </body>
</html>
