# 実装計画書: 打者・投手表示および結果アニメーション

## 概要

現在対戦している打者（Batter）と投手（Pitcher）を画面下部の左右に大きく表示し、打者のこれまでの打席結果を表示する。
また、管理画面で打席結果が入力された際、画面中央にアニメーション付きでその結果を表示する機能を追加する。

## 変更対象ファイル

- `index.html`: 新しい表示用要素（打者、投手、アニメーション領域）を追加。
- `style.css`: 新しい要素のスタイル定義、アニメーション定義（keyframes）。
- `script.js`: 表示更新ロジックの追加、結果入力時のイベント通知とアニメーション発火処理。

## 詳細仕様

### 1. 打者・投手表示 (index.html, style.css)

- **レイアウト**:
  - **打者 (Batter)**: 画面左下（サイドバーの下、またはボトムコントロールの左側）に配置。
    - 表示内容: 「現在の打者名」、「これまでの打席結果（当日の成績）」
  - **投手 (Pitcher)**: 画面右下（サイドバーの下、またはボトムコントロールの右側）に配置。
    - 表示内容: 「現在の投手名」
    - ※投手の「結果」については、現状のデータ構造では投球数や詳細スタッツを持てないため、今回は名前の表示を優先し、拡張性を持たせる。

- **デザイン**:
  - 既存のダークテーマ（黒、クリムゾンレッド、ゴールド）を踏襲。
  - 文字サイズを大きくし、視認性を高める。
  - 打席結果はリスト形式または横並びで表示（例: 「遊ゴロ　左安　三振」）。

### 2. 結果アニメーション (index.html, style.css, script.js)

- **仕組み**:
  - 管理画面 (`admin.html`) で「単打」「三振」などのボタンが押された際、データ更新とは別に「結果イベント」を発火。
  - 表示画面 (`index.html`) がそのイベント（またはデータ変化）を検知し、中央エリアにオーバーレイを表示。
- **アニメーション**:
  - 中央に大きくテキスト（例: "SINGLE", "HOMERUN", "OUT"）を表示。
  - フェードイン → 拡大/強調 → 数秒待機 → フェードアウト の流れ。
  - 結果種別に応じて色を変える（安打=黄色/赤、アウト=青/グレーなど）とより効果的。

## 実装ステップ

1. **HTML構造の追加** (`index.html`)
   - `#player-display-left` (打者用)
   - `#player-display-right` (投手用)
   - `#result-overlay` (アニメーション用)

2. **スタイルの適用** (`style.css`)
   - 各エリアの配置（absolute positioning）。
   - フォントサイズ、色、背景などの装飾。
   - CSS Animation (`@keyframes`) の定義。

3. **JSロジックの実装** (`script.js`)
   - `updateDisplay()` 内で打者・投手の詳細表示処理を追加。
   - 打席結果履歴の整形表示（`state.atBatResults` を利用）。
   - `recordAtBatResult()` 修正: 結果確定時に `broadcastChannel` 経由でイベント送信（例: `{ type: 'SHOW_RESULT', result: 'single' }`）。
   - メッセージ受信時のアニメーション発火処理。
