# 3アウトチェンジ用アニメーション実装設計書

## 1. 目的

3アウト（チェンジ）発生時に、ユーザーが「おっ」と思うようなプレミアム感のある、ゆったりとしたアニメーションを表示する。

## 2. 変更内容

### 2.1 UI (index.html, index.css)

- `index.html` にチェンジ用のアニメーションオーバーレイ `change-overlay` を追加。
- `css/overlay.css` または `css/animation.css` にチェンジ用のアニメーションスタイルを定義。
  - フェードイン・フェードアウト、文字のゆったりとした動き、プレミアム感のある色使い（金文字、グラデーション、シャドウなど）。

### 2.2 ロジック (js/logic/game.js, js/app.js)

- `js/logic/game.js`: `recordAtBatResult` が `addOut` の戻り値を受け取り、チェンジになったかどうかを判断できるようにする。
- `js/app.js`:
  - `btn-strike` や `btn-out` 、および「打席結果ボタン」での処理において、`GameLogic.addOut` または `GameLogic.recordAtBatResult` の結果がチェンジ（3アウト）を意味する場合、`Sync.broadcastResultEvent('CHANGE', ...)` を呼び出す。

### 2.3 描画 (js/ui/render.js)

- `showResultAnimation` 関数内で `resultCode === 'CHANGE'` の場合の処理を追加。
- ヒットなどの通常のアニメーションとは別の、ゆったりとした演出を実行する `playChangeAnimation` 関数を新規作成。

## 3. アニメーション仕様

- 背景: 黒の半透明（0.8程度）から始まり、中心に光が集まるような演出。
- 文字: "3 OUTS CHANGE" または "3 OUTS" の後、ゆったりと "CHANGE" が表示される。
- 色: ゴールド（#FFD700）を基調としたグラデーション。
- 持続時間: 5秒程度（通常のヒットアニメーションより長め）。

## 4. 承認確認

この設計で実装を進めてよろしいでしょうか？ (y/n)
