# データベース保存機能 動作確認手順

## 前提条件

- Dockerコンテナ（MySQL + APIサーバー）が起動していること
- ブラウザで `http://localhost:8080/admin.html` にアクセスできること

## 確認手順

### 1. 管理画面を開く

1. ブラウザで `http://localhost:8080/admin.html` を開く
2. F12キーを押して開発者ツールを開き、コンソールタブを確認
3. 「✅ APIサーバーに接続しました」というメッセージが表示されていることを確認
   - もし「⚠️ APIサーバーに接続できません」と表示される場合は、Dockerコンテナが起動しているか確認してください

### 2. チーム名を入力

1. 「チーム名」セクションで、先攻（アウェイ）と後攻（ホーム）のチーム名を入力
   - 例: 先攻「タイガース」、後攻「ジャイアンツ」
2. 入力後、自動的に保存されます

### 3. 投手名を入力

1. 「打順・選手名入力」セクションまでスクロール
2. 先攻（アウェイ）と後攻（ホーム）の各列の一番下に、「P」マークと「投手名（DH制・先発）」という入力欄があります
3. ここに投手名を入力します
   - 例: 先攻「田中 将大」、後攻「菅野 智之」
4. 入力後、自動的に保存されます

### 4. 打順・選手名を入力（任意）

1. 1番〜9番の選手名と守備位置を入力できます
2. 入力すると自動的に保存されます

### 5. データ永続化の確認

1. ブラウザをリロード（F5キー）します
2. 入力したチーム名、投手名、選手名がすべて保持されていることを確認
3. これで、データがデータベースに正しく保存されていることが確認できます

### 6. 表示画面での確認

1. 新しいタブで `http://localhost:8080/index.html` を開く
2. 管理画面で入力したチーム名が表示されていることを確認
3. 投手名が下部の「PITCHER」セクションに表示されていることを確認
4. 管理画面でデータを変更すると、表示画面にもリアルタイムで反映されます

## トラブルシューティング

### APIサーバーに接続できない場合

```powershell
# Dockerコンテナの状態を確認
docker-compose ps

# コンテナを再起動
docker-compose restart

# ログを確認
docker-compose logs api
```

### データが保存されない場合

1. F12キーで開発者ツールを開く
2. コンソールタブでエラーメッセージを確認
3. ネットワークタブで `/api/state` へのPUTリクエストが成功しているか確認（ステータスコード200）

### 投手名が表示されない場合

1. 管理画面で投手名を入力したか確認
2. 表示画面をリロードして最新データを取得
3. 守備位置で「投」を選択している選手がいる場合、その選手名が優先表示される仕様です
