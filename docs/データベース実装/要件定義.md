# 要件定義書：データベースによる管理機能

## 1. 目的

チーム、選手、試合データをデータベースで一元管理し、リアルタイムで成績（打撃・投手指標）を自動計算して表示に反映させる。

## 2. 管理対象データ

### 2.1 チーム情報

- チーム名
- 略称
- （オプション）ロゴ、カラーなど

### 2.2 選手情報

- 名前
- 背番号
- ポジション
- 投打（右投左打など）
- 所属チーム

### 2.3 打撃成績（記録項目）

- **打席数 (PA)**
- **打数 (AB)**
- **安打 (H)**: 単打、二塁打、三塁打、本塁打
- **四死球 (BB/HBP)**
- **打点 (RBI)**
- **得点 (R)**
- **三振 (SO)**
- **犠打/犠飛 (SH/SF)**

### 2.4 投手成績（記録項目）

- **投球回数 (IP)**: 1/3単位で記録
- **被安打 (H)**
- **被本塁打 (HR)**
- **与四球 (BB)**
- **奪三振 (K)**
- **失点 (R)**
- **自責点 (ER)**

## 3. 自動計算指標

### 3.1 打撃指標

- **打率 (AVG)**: `安打 ÷ 打数`
- **出塁率 (OBP)**: `(安打 + 四死球) ÷ (打数 + 四死球 + 犠飛)`
- **長打率 (SLG)**: `塁打数 ÷ 打数`
  - 塁打数 = `単打×1 + 二塁打×2 + 三塁打×3 + 本塁打×4`
- **OPS**: `出塁率 + 長打率`

### 3.2 投手指標

- **防御率 (ERA)**: `(自責点 × 9) ÷ 投球回数`
- **奪三振率 (K/9)**: `(奪三振 × 9) ÷ 投球回数`
- **与四球率 (BB/9)**: `(与四球 × 9) ÷ 投球回数`
- **WHIP**: `(被安打 + 与四球) ÷ 投球回数`

## 4. 機能要件

1. **データ登録**: `admin-simple.html` の操作（ヒット、アウト等のボタン押下）時にデータベースへ記録を送信する。
2. **リアルタイム更新**: データベースの更新をトリガーに、表示側（`index.html`）の成績表示を更新する。
3. **管理機能**:
   - **管理画面 (`admin-db.html`)**:
     - チームのCRUD操作（登録、一覧、編集、削除）
     - 選手のCRUD操作（登録、一覧、編集、削除）
     - GUIで直感的に操作できるモダンなインターフェース
